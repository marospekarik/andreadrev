---
import BaseLayout from './BaseLayout.astro';
import { AstroSeo } from '@astrolib/seo';
import Gallery from '@/components/global/Gallery';
import { array } from 'astro/zod';
const { frontmatter } = Astro.props;
export const videos = [
  {
    src: 'https://www.youtube.com/watch?v=Kxt04tKW-WQ',
    title: 'PAR with Buc Kesidi',
    description: 'Description of video 1',
  },
  {
    src: 'https://www.youtube.com/watch?v=_dGYIt5RXN0',
    title: 'A1 Ad',
    description: 'Description of video 2',
  },
  {
    src: 'https://www.youtube.com/watch?v=yh2RiXwzqDA',
    title: 'Buc Kesidi - Subota',
    description: 'Description of video 3',
  },
  {
    src: 'https://www.youtube.com/watch?v=4BYASJt5plY',
    title: 'Relja - Mi Amor',
    description: 'Description of Relja - Mi Amor video',
  },
  {
    src: 'https://www.youtube.com/watch?v=w5oAafTiL2c',
    title: 'Audi Ad',
    description: 'Description of Audi Ad',
  },
  {
    src: 'https://www.youtube.com/watch?v=g020yafYj3U',
    title: 'SebastiAn - Beograd',
    description: 'Description of SebastiAn - Beograd video',
  },
  {
    src: 'https://www.youtube.com/watch?v=vB9w72KVIsI',
    title: 'Vizelj - Ne vidim te od dima',
    description: 'Description of Vizelj - Ne vidim te od dima video',
  },
  {
    src: 'https://www.youtube.com/watch?v=oM_A97yd12c',
    title: 'Pi - B.C. (Benedetta C.) /// ✞ ✞ ✞ (3 lijesa)',
    description: 'Description of Pi - B.C. (Benedetta C.) video',
  },
  {
    src: 'https://www.youtube.com/watch?v=30186LeYSTs',
    title: 'SYNTHESIZED MEMORIES',
    description: 'Description of SYNTHESIZED MEMORIES video',
  },
  {
    src: 'https://www.youtube.com/watch?v=awTbp-0-UjI',
    title: 'Eyerim - Magic Mirror Ad',
    description: 'Description of Eyerim - Magic Mirror Ad',
  },
  {
    src: 'https://www.youtube.com/watch?v=cmRp7Ktodto',
    title: 'Inka - Tama vozi me',
    description: 'Description of Inka - Tama vozi me video',
  },
  {
    src: 'https://www.youtube.com/watch?v=dZAZD8N6UQU',
    title: "Maria Køhnke – Don't Look At Me",
    description: "Description of Maria Køhnke – Don't Look At Me video",
  },
];
export async function getImages(frontmatter) {
  var images = await Astro.glob('/src/assets/work/**')
    .then((files) => {
      return files.map((file) => file.default);
    })
    .then((images) => {
      return images.filter((obj) => {
        return obj.src.includes(frontmatter.imageFolder);
      });
    });
  if (frontmatter.title === 'VIDEO') {
    return videos;
  }
  return images;
}
const images = await getImages(frontmatter);

// const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/**');
// const imgArr = [];
// Promise.all(
//   Object.entries(images).map(async ([key, value]) => {
//     if (key.includes(frontmatter.imageFolder)) {
//       const img = await value();
//       imgArr.push(img.default.src);
//     }
//   })
// ).then(() => {
//   console.log('imgArr', imgArr);
// });

// const extraVideos = frontmatter?.videos || [];
// extraVideos.forEach((v) => {
//   images.push({
//     src: v,
//     title: 'default',
//     description: 'default',
//   });
// });
---

<!---
Use AstroSeo in all the pages you want different Seo than the index page
-->
<AstroSeo
  title="Title"
  description="Your site description goes here"
  canonical="https://www.lexingtonthemes.com"
  openGraph={{
    url: 'https://www.lexingtonthemes.com',
    title: 'Open Graph Title',
    description: 'Open Graph Description',
    images: [
      {
        url: 'https://www.lexingtonthemes.com/opengraph/social-og.jpg',
        width: 1200,
        height: 630,
        alt: 'Social open graph',
        type: 'image/jpeg',
      },
      {
        url: 'https://www.lexingtonthemes.com/opengraph/twitter-og.jpg',
        width: 4096,
        height: 4096,
        alt: 'Twitter open graph',
        type: 'image/jpeg',
      },
      { url: 'https://www.lexingtonthemes.com/opengraph/social-og.jpg' },
      { url: 'https://www.lexingtonthemes.com/opengraph/twitter-og.jpg' },
    ],
    site_name: 'YourSitesName',
  }}
  twitter={{
    handle: '@TwitterHandle',
    site: '@site',
    cardType: 'summary_large_image',
  }}
/>
<BaseLayout>
  <section class="flex flex-row">
    <div class="w-1/2">
      <Gallery images={images} client:only />
    </div>
    <div class="w-1/2 px-10">
      <p class="">
        <h1>{frontmatter.title}</h1>
        <!-- <h2 class="text-xs text-zinc-500">
          {frontmatter.pubDate.toString().slice(0, 10)} - Written by: {frontmatter.author}
        </h2> -->
      </p>
      <div class="flex gap-3">
        {
          frontmatter.tags.map((tag) => (
            <span class="inline-flex items-center uppercase    hover:text-blue-500   text-xs font-medium text-black">
              <a href={`/tags/${tag}`}>{tag}</a>
            </span>
          ))
        }
      </div>
      <div class="mt-6">
        <div class="prose-styles">
          <slot />
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
