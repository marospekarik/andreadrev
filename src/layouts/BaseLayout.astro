---
import BaseHead from '@/components/BaseHead.astro';
import Navigation from '@/components/global/Navigation.astro';
import Footer from '@/components/global/Footer.astro';
import Player from '@/components/global/Player.astro';
import Drawer from '@/components/global/Drawer';
import { ViewTransitions } from 'astro:transitions';
const url = Astro.url;
import { getCollection } from 'astro:content';

const allPosts = await getCollection('posts');
const tags = [...new Set(allPosts.map((post) => post.data.tags).flat())];
//
---

<html lang="en" class="h-screen w-screen">
  <head>
    <BaseHead />
    <ViewTransitions />
  </head>
  <body class="h-full w-full bg-gray-50 flex flex-col">
    <Player />
    <div class="h-full w-full flex flex-col md:flex-row md:pt-10">
      <Drawer url={url} tags={tags} posts={allPosts} transition:animate="fade" />
      <div class="h-full w-full content my-0 md:mr-6 md:w-5/6" transition:animate="fade">
        <main class="h-full w-full flex-grow"><slot /></main>
        <!-- <div class="absolute w-full h-full bg-black opacity-50"></div> -->
      </div>
    </div>
    <!-- <Footer /> -->
  </body>
</html>
